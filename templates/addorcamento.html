<!-- Template addorcamento.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Novo Orçamento - Agropecuária Zecão</title>
    <link href="static/css/gerencia.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
    {% include 'base.html' %}
    <div class="container">
        <div class="box">
            <h1>Criar Novo Orçamento</h1>

            <form method="POST" action="{{ url_for('orcamento.add_orcamento') }}">
                <label for="produtor">Produtor:</label>
                <input type="text" id="produtor" name="produtor" required>

                <label for="validade">Validade (em dias):</label>
                <input type="number" id="validade" name="validade" required>

                <label for="data">Data:</label>
                <input type="date" id="data" name="data" required>

                <label for="total">Total:</label>
                <input type="text" id="total" name="total" required>

                <h3>Produtos:</h3>
                <div id="produtos-container">
                    <div class="produto">
                        <label for="produto1">Produto:</label>
                        <input type="text" id="produto1" name="produto[]" required>

                        <label for="quantidade1">Quantidade:</label>
                        <input type="number" id="quantidade1" name="quantidade[]" required>

                        <label for="preco1">Preço:</label>
                        <input type="text" id="preco1" name="preco[]" required>
                    </div>
                </div>
                <button type="button" id="adicionarProduto">Adicionar Produto</button>

                <button type="submit">Salvar Orçamento</button>
                <button type="button" onclick="window.location.href='/gerenciamento'">Cancelar</button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById("adicionarProduto").addEventListener("click", function() {
            const produtosContainer = document.getElementById("produtos-container");
            const produtoCount = produtosContainer.children.length + 1;

            const novoProduto = document.createElement("div");
            novoProduto.classList.add("produto");

            novoProduto.innerHTML = `
                <label for="produto${produtoCount}">Produto:</label>
                <input type="text" id="produto${produtoCount}" name="produto[]" required>

                <label for="quantidade${produtoCount}">Quantidade:</label>
                <input type="number" id="quantidade${produtoCount}" name="quantidade[]" required>

                <label for="preco${produtoCount}">Preço:</label>
                <input type="text" id="preco${produtoCount}" name="preco[]" required>
            `;

            produtosContainer.appendChild(novoProduto);
        });
    </script>
</body>
</html>
